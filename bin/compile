#!/bin/sh

indent() {
  sed -u 's/^/       /'
}

path=geolite
echo "-----> Creating geolite folder in ./geolite"
mkdir -p ./geolite

echo "-----> Downloading databases..."
wget -O ./geolite/city.mmdb.gz http://geolite.maxmind.com/download/geoip/database/GeoLite2-City.mmdb.gz
wget -O ./geolite/country.mmdb.gz http://geolite.maxmind.com/download/geoip/database/GeoLite2-Country.mmdb.gz

# city_checksum=$(curl http://geolite.maxmind.com/download/geoip/database/GeoLite2-City.md5)
# country_checksum=$(curl http://geolite.maxmind.com/download/geoip/database/GeoLite2-Country.md5)
# echo "-----> Download complete. Verifying checksum..."

# city=$(cat ./geolite/city.mmdb.gz | md5sum)
# country=$(cat ./geolite/country.mmdb.gz | md5sum)
# echo $city_checksum
# echo $city
# echo $country_checksum
# echo $country


# if ! [ "$city" == "$city_checksum" ]; then
#   echo "-----> ERROR: city db checksums does not match"
# fi

# if ! [ "$country" == "$country_checksum" ]; then
#   echo "-----> ERROR: country db checksums does not match"
# fi